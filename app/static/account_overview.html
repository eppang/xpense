<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
		<!--Import Google Icon Font-->
		<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
		<link href="https://fonts.googleapis.com/css?family=Roboto Mono" rel="stylesheet">
		<!--Import materialize.css-->
		<link type="text/css" rel="stylesheet" href="/materialize/css/materialize.min.css" media="screen,projection">
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
		<link type="text/css" rel="stylesheet" href="/style/global.css">

		<style>
			.transaction {
				margin-bottom: 0;
			}
			
			.numbers {
				font-family: "Roboto Mono", Arial;
			}

			.sticky {
				position: -webkit-sticky;
				position: sticky;
				background-color: white;
				padding: 10px;
				top: 0;
			}
		</style>

		<!--Let browser know website is optimized for mobile-->
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
	</head>
	<body onload="SetDate();">
		<header>
			<nav>
				<div class="nav-wrapper" style="padding: 0 .75rem;">
					<a href="/overview" class="brand-logo"><span style="font-weight: bold;"><span style="font-style: italic;">x</span>pense</span></a>
					<a class="dropdown-trigger btn-flat" href="#" data-target="logout" style="height: 100%; float: right;"><i class="material-icons" style="color: white;">account_circle</i></a>
					<ul id="logout" class='dropdown-content'>
						<li><a href="/authenticate/logout">Log out</a></li>
					</ul>
				</div>
			</nav>
		</header>
		<main>
			<div class="box container">
				<div class="sticky" style="margin: 0 -20px; background: linear-gradient(0deg, rgba(0,0,0,0.0) 0%, rgba(255,255,255,0.8) 30%, rgba(255,255,255,1) 100%);">
					<div class="row">
						<div class="col s4">
							<h4 class="red-text text-lighten-1" style="margin-top: 0;">Savings Account</h4>
						</div>
						<div class="col s8" style="text-align: right;">
							<a class="dropdown-trigger btn" href="#" data-target="dropdown1"><i class="material-icons">add</i></a>
							<ul id="dropdown1" class='dropdown-content'>
								<li><a class="modal-trigger" href="#deposit-modal">Add Deposit</a></li>
								<li><a class="modal-trigger" href="#withdraw-modal">Add Withdrawal</a></li>
							</ul>
						</div>
					</div>
					<h2 class="numbers" id="total" style="margin-top: 0.5rem; padding-left: .75rem;">$1908.00</h2>
				</div>
				<!--Each of these is a transaction thingy-->
				<div class="divider"></div>
<!--				<div class="section">-->
					<div class="row transaction">
						<div class="col s1">
							<h5 class="red-text text-lighten-1">Rent</h5>
							<p>6/9/19</p>
						</div>
						<div class="col s1 offset-s9">
							<h5 class="numbers" style="margin-top: 40px; color: red;">($560.00)</h5>
						</div>
					</div>
<!--				</div>-->
				<!--Each of these is a transaction thingy-->
				<div class="divider"></div>
<!--				<div class="section">-->
					<div class="row transaction">
						<div class="col s1">
							<h5 class="red-text text-lighten-1">Rent</h5>
							<p>6/9/19</p>
						</div>
						<div class="col s1 offset-s9">
							<h5 class="numbers" style="margin-top: 40px; color: red;">($560.00)</h5>
						</div>
					</div>
<!--				</div>-->
				<div class="divider"></div>
<!--				<div class="section">-->
					<div class="row transaction">
						<div class="col s1">
							<h5 class="red-text text-lighten-1">Rent</h5>
							<p>6/9/19</p>
						</div>
						<div class="col s1 offset-s9">
							<h5 class="numbers" style="margin-top: 40px; color: red;">($560.00)</h5>
						</div>
					</div>
<!--				</div>-->
				<div class="divider"></div>
<!--				<div class="section">-->
					<div class="row transaction">
						<div class="col s1">
							<h5 class="red-text text-lighten-1">Rent</h5>
							<p>6/9/19</p>
						</div>
						<div class="col s1 offset-s9">
							<h5 class="numbers" style="margin-top: 40px; color: red;">($560.00)</h5>
						</div>
					</div>
<!--				</div>-->
				<div class="divider"></div>
<!--				<div class="section">-->
					<div class="row transaction">
						<div class="col s1">
							<h5 class="red-text text-lighten-1">Rent</h5>
							<p>6/9/19</p>
						</div>
						<div class="col s1 offset-s9">
							<h5 class="numbers" style="margin-top: 40px; color: red;">($560.00)</h5>
						</div>
					</div>
<!--				</div>-->
				<div class="divider"></div>
<!--				<div class="section">-->
					<div class="row transaction">
						<div class="col s1">
							<h5 class="red-text text-lighten-1">Rent</h5>
							<p>6/9/19</p>
						</div>
						<div class="col s1 offset-s9">
							<h5 class="numbers" style="margin-top: 40px; color: red;">($560.00)</h5>
						</div>
					</div>
<!--				</div>-->
				<div class="divider"></div>
<!--				<div class="section">-->
					<div class="row transaction">
						<div class="col s1">
							<h5 class="red-text text-lighten-1">Rent</h5>
							<p>6/9/19</p>
						</div>
						<div class="col s1 offset-s9">
							<h5 class="numbers" style="margin-top: 40px; color: red;">($560.00)</h5>
						</div>
<!--					</div>-->
				</div>
				<div class="divider"></div>
<!--				<div class="section">-->
					<div class="row transaction">
						<div class="col s1">
							<h5 class="red-text text-lighten-1">Rent</h5>
							<p>6/9/19</p>
						</div>
						<div class="col s1 offset-s9">
							<h5 class="numbers" style="margin-top: 40px; color: red;">($560.00)</h5>
						</div>
					</div>
<!--				</div>-->
				<div class="divider"></div>
<!--				<div class="section">-->
					<div class="row transaction">
						<div class="col s1">
							<h5 class="red-text text-lighten-1">Rent</h5>
							<p>6/9/19</p>
						</div>
						<div class="col s1 offset-s9">
							<h5 class="numbers" style="margin-top: 40px; color: red;">($560.00)</h5>
						</div>
					</div>
<!--				</div>-->
			</div>
			<div id="deposit-modal" class="modal">
				<div class="modal-content">
					<h4>Deposit Transaction</h4>
					<form class="col s12">
						<div class="row">
							<div class="input-field col s6">
								<input id="label" type="text" class="validate">
								<label for="label">What is this transaction for?</label>
							</div>
							<div class="input-field col s6">
								<input type="date" id="deposit-date" class="validate">
								<label for="deposit-date">Date</label>
							</div>
						</div>
						<div class="row">
							<div class="input-field col s12">
								<input id="deposit-amount" type="number" class="validate">
								<label for="deposit-amount">Amount</label>
							</div>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<a href="#!" class="modal-close waves-effect waves-green btn-flat">Cancel</a>
					<a href="#!" class="modal-close waves-effect waves-green btn-flat" onclick="M.toast({html: 'Amount Added!'})">OK</a>
				</div>
			</div>
			<div id="withdraw-modal" class="modal">
				<div class="modal-content">
					<h4>Withdraw Transaction</h4>
					<form class="col s12">
						<div class="row">
							<div class="input-field col s6">
								<input id="label" type="text" class="validate">
								<label for="label">What is this transaction for?</label>
							</div>
							<div class="input-field col s6">
								<input type="date" id="withdraw-date" class="validate">
								<label for="withdraw-date">Date</label>
							</div>
						</div>
						<div class="row">
							<div class="input-field col s12">
								<input id="withdraw-amount" type="number" class="validate">
								<label for="withdraw-amount">Amount</label>
							</div>
						</div>
					</form>
				</div>
				<div class="modal-footer">
					<a href="#!" class="modal-close waves-effect waves-green btn-flat">Cancel</a>
					<a href="#!" class="modal-close waves-effect waves-green btn-flat" onclick="M.toast({html: 'Amount Withdrawn!'})">OK</a>
				</div>
			</div>
		</main>
		<footer class="page-footer">
			<div class="container">
				<div class="white-text row">
					<div class="col s4 l3">
						<ul>
							<li><a class="grey-text text-lighten-3" href="#!">About Us</a></li>
							<li><a class="grey-text text-lighten-3" href="#!">Contact Us</a></li>
						</ul>
					</div>
					<div class="col s4 l3">
						<ul>
							<li><a class="grey-text text-lighten-3" href="#!">Terms of Service</a></li>
							<li><a class="grey-text text-lighten-3" href="#!">Privacy Policy</a></li>
							<li><a class="grey-text text-lighten-3" href="#!">Help</a></li>
						</ul>
					</div>
					<div class="col s4 l3">
						<ul>
							<li><a class="grey-text text-lighten-3" href="#!">Facebook</a></li>
							<li><a class="grey-text text-lighten-3" href="#!">Instagram</a></li>
							<li><a class="grey-text text-lighten-3" href="#!">Twitter</a></li>
						</ul>
					</div>
				</div>
			</div>
			<div class="footer-copyright">
				<div class="container">
				© 2019 E²
				<a class="grey-text text-lighten-4 right" href="#!">More Links</a>
				</div>
			</div>
		</footer>
		<!--JavaScript at end of body for optimized loading-->
		<script type="text/javascript" src="materialize/js/materialize.min.js"></script>
		<script>
			document.addEventListener('DOMContentLoaded', function() {
				let dropdowns = document.querySelectorAll('.dropdown-trigger');
				let dropdownInstances = M.Dropdown.init(dropdowns, {alignment: "right", constrainWidth: false});
				let modals = document.querySelectorAll('.modal');
				let modalInstances = M.Modal.init(modals);
			});
			
			function SetDate()
			{
				let date = new Date();

				let day = date.getDate();
				let month = date.getMonth() + 1;
				let year = date.getFullYear();

				if (month < 10) month = "0" + month;
				if (day < 10) day = "0" + day;

				let today = year + "-" + month + "-" + day;


				document.getElementById('deposit-date').value = today;
				document.getElementById('withdraw-date').value = today;
			}
			
			// TODO: Fix event
			$('input').keyup(function(){ // run anytime the value changes
    			let addValue = Number($('#deposit-amount').val());   // get value of field
				let subValue = Number($('#withdraw-amount').val());
				let totalValue = Number($('#total').text().replace("$", "")); // Takes away dollar sign; needs to put it back somehow later
				let convertedTotal = parseFloat(totalValue);
				let convertedAdd = parseFloat(addValue);
				let convertedSub = parseFloat(subValue);
				let finalTotal = 0;
				if (addValue != "") {
					finalTotal = parseFloat(convertedAdd + convertedTotal).toFixed(2);
					// Invoke document.getElementById("deposit-amount").value = ""; when user clicks 'ok'
				} else if (subValue != "") {
					finalTotal = parseFloat(convertedTotal - convertedSub).toFixed(2);
					// Invoke document.getElementById("deposit-amount").value = ""; when user clicks 'ok'
				}

				$('#total').html("$" + finalTotal);
			});
			


			

		</script>
	</body>
</html>
